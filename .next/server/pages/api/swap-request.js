"use strict";(()=>{var e={};e.id=884,e.ids=[884],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5034:(e,a,t)=>{t.r(a),t.d(a,{config:()=>l,default:()=>p,routeModule:()=>c});var r={};t.r(r),t.d(r,{default:()=>handler});var s=t(1802),n=t(7153),i=t(6249);let u=require("next-auth/jwt"),d=require("@sendgrid/mail");var o=t.n(d);async function sendSwapEmail(e,a,t){let r=`https://your-app.com/approve?week=${t}&from=${a}`;await o().send({to:e,from:"binbuddy@example.com",subject:`Swap Request for Week ${t}`,text:`${a} wants to swap garbage duty for week ${t}. Approve here: ${r}`})}async function handler(e,a){let t=await (0,u.getToken)({req:e});if(!t)return a.status(401).end("Unauthorized");let{targetEmail:r,requester:s,week:n}=e.body;try{await sendSwapEmail(r,s,n),a.status(200).json({success:!0})}catch(e){a.status(500).json({error:"Failed to send swap request."})}}o().setApiKey(process.env.SENDGRID_API_KEY);let p=(0,i.l)(r,"default"),l=(0,i.l)(r,"config"),c=new s.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/swap-request",pathname:"/api/swap-request",bundlePath:"",filename:""},userland:r})}};var a=require("../../webpack-api-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[222],()=>__webpack_exec__(5034));module.exports=t})();