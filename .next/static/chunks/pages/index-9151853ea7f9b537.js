(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2627)}])},2627:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Home}});var i=n(5893),s=n(3299),u=n(7294);function Home(){let{data:e}=(0,s.useSession)(),[t,n]=(0,u.useState)([]),[r,a]=(0,u.useState)("");return(0,u.useEffect)(()=>{fetch("/api/schedule").then(e=>e.json()).then(e=>{n(e.schedule),a(e.currentWeek)})},[]),(0,i.jsxs)("div",{style:{padding:24,maxWidth:600,margin:"auto"},children:[(0,i.jsx)("h1",{children:"\uD83D\uDDD3️ BinBuddy Schedule"}),!e&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Login to request swaps."}),(0,i.jsx)("button",{onClick:()=>(0,s.signIn)(),children:"Sign in with Google"})]}),(0,i.jsx)("ul",{children:t.map((t,n)=>{var s;return(0,i.jsxs)("li",{style:{marginBottom:8,fontWeight:t.week===r?"bold":"normal",backgroundColor:t.week===r?"#d9f9d9":void 0,padding:10,border:"1px solid #ccc",borderRadius:5},children:["Week ",t.week,": ",t.family,(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.email)===t.email&&t.week===r&&(0,i.jsx)(SwapRequestForm,{currentWeek:t.week,requester:t.family})]},n)})})]})}function SwapRequestForm(e){let{currentWeek:t,requester:n}=e,[s,r]=(0,u.useState)(""),[a,o]=(0,u.useState)(""),submitSwap=async()=>{let e=await fetch("/api/swap-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetEmail:s,requester:n,week:t})});e.ok?o("Request sent!"):o("Failed to send")};return(0,i.jsxs)("div",{style:{marginTop:10},children:[(0,i.jsx)("input",{placeholder:"Target email",value:s,onChange:e=>r(e.target.value),style:{padding:4,marginRight:6}}),(0,i.jsx)("button",{onClick:submitSwap,children:"Request Swap"}),(0,i.jsx)("p",{children:a})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);